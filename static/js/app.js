const API_URL='';let currentUser=JSON.parse(localStorage.getItem('healthlog_user')||'null');function showAuthModal(t){document.getElementById('auth-modal').classList.add('active');document.getElementById('login-form').style.display=t==='login'?'block':'none';document.getElementById('signup-form').style.display=t==='signup'?'block':'none'}function closeAuthModal(){document.getElementById('auth-modal').classList.remove('active')}async function handleLogin(e){e.preventDefault();const email=document.getElementById('login-email').value,password=document.getElementById('login-password').value;try{const res=await fetch(`${API_URL}/api/auth/login`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,password})});if(res.ok){const data=await res.json();currentUser=data;localStorage.setItem('healthlog_user',JSON.stringify(data));closeAuthModal();window.location.href='/dashboard'}else{alert('Invalid credentials')}}catch(e){alert('Error logging in')}}async function handleSignup(e){e.preventDefault();const name=document.getElementById('signup-name').value,email=document.getElementById('signup-email').value,password=document.getElementById('signup-password').value;try{const res=await fetch(`${API_URL}/api/auth/signup`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name,email,password})});if(res.ok){alert('Account created! Please log in.');showAuthModal('login')}else{const err=await res.json();alert(err.detail||'Signup failed')}}catch(e){alert('Error signing up')}}function toggleMobileMenu(){const nav=document.querySelector('.nav-links');nav.style.display=nav.style.display==='flex'?'none':'flex'}document.addEventListener('click',e=>{if(e.target.classList.contains('modal'))closeAuthModal()});document.addEventListener('keydown',e=>{if(e.key==='Escape')closeAuthModal()});
